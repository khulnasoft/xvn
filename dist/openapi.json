{
  "openapi": "3.1.0",
  "servers": [
    {
      "url": "http://localhost:1337",
      "description": "localhost"
    }
  ],
  "info": {
    "title": "khulnasoft serverless registry",
    "version": "0.1.1",
    "license": {
      "identifier": "FSL-1.1-MIT",
      "name": "Functional Source License, Version 1.1, MIT Future License",
      "url": "https://fsl.software/FSL-1.1-MIT.template.md"
    },
    "description": "\n  The **khulnasoft serverless registry** is a npm compatible JavaScript package registry which replicates core features & functionality of **`registry.npmjs.org`** while also introducing net-new capabilities.\n\n  ### Compatible Clients\n\n  <table>\n    <tbody>\n      <tr>\n        <td><a href=\"https://khulnasoft.com\" alt=\"khulnasoft\"><strong><code>khulnasoft</code></strong></a></td>\n        <td><a href=\"https://npmjs.com/package/npm\" alt=\"npm\"><strong><code>npm</code></strong></a></td>\n        <td><a href=\"https://yarnpkg.com/\" alt=\"yarn\"><strong><code>yarn</code></strong></a></td>\n        <td><a href=\"https://pnpm.io/\" alt=\"pnpm\"><strong><code>pnpm</code></strong></a></td>\n        <td><a href=\"https://deno.com/\" alt=\"deno\"><strong><code>deno</code></strong></a></td>\n        <td><a href=\"https://bun.sh/\" alt=\"bun\"><strong><code>bun</code></strong></a></td>\n      </tr>\n    </tbody>\n  </table>\n\n  ### Resources\n\n  <ul alt=\"resources\">\n    <li><a href=\"https://khulnasoft.com\">https://<strong>khulnasoft.com</strong></a></li>\n    <li><a href=\"https://github.com/khulnasoft/xvn\">https://github.com/<strong>khulnasoft/xvn</strong></a></li>\n    <li><a href=\"https://discord.gg/khulnasoft\">https://discord.gg/<strong>khulnasoft</strong></a></li>\n    <li><a href=\"https://x.com/khulnasoft\">https://x.com/<strong>khulnasoft</strong></a></li>\n  </ul>\n\n  ##### Trademark Disclaimer\n\n  <p alt=\"trademark-disclaimer\">All trademarks, logos and brand names are the property of their respective owners. All company, product and service names used in this website are for identification purposes only. Use of these names, trademarks and brands does not imply endorsement.</p>\n\n  ### License\n\n<details alt=\"license\">\n  <summary><strong>Functional Source License</strong>, Version 1.1, MIT Future License</summary>\n<h1>Functional Source License,<br />Version 1.1,<br />MIT Future License</h1>\n<h2>Abbreviation</h2>\n\nFSL-1.1-MIT\n\n<h2>Notice</h2>\n\nCopyright 2025 KhulnaSoft Ltd.\n\n<h2>Terms and Conditions</h2>\n\n<h3>Licensor (\"We\")</h3>\n\nThe party offering the Software under these Terms and Conditions.\n\n<h3>The Software</h3>\n\nThe \"Software\" is each version of the software that we make available under\nthese Terms and Conditions, as indicated by our inclusion of these Terms and\nConditions with the Software.\n\n<h3>License Grant</h3>\n\nSubject to your compliance with this License Grant and the Patents,\nRedistribution and Trademark clauses below, we hereby grant you the right to\nuse, copy, modify, create derivative works, publicly perform, publicly display\nand redistribute the Software for any Permitted Purpose identified below.\n\n<h3>Permitted Purpose</h3>\n\nA Permitted Purpose is any purpose other than a Competing Use. A Competing Use\nmeans making the Software available to others in a commercial product or\nservice that:\n\n1. substitutes for the Software;\n\n2. substitutes for any other product or service we offer using the Software\n  that exists as of the date we make the Software available; or\n\n3. offers the same or substantially similar functionality as the Software.\n\nPermitted Purposes specifically include using the Software:\n\n1. for your internal use and access;\n\n2. for non-commercial education;\n\n3. for non-commercial research; and\n\n4. in connection with professional services that you provide to a licensee\n  using the Software in accordance with these Terms and Conditions.\n\n<h3>Patents</h3>\n\nTo the extent your use for a Permitted Purpose would necessarily infringe our\npatents, the license grant above includes a license under our patents. If you\nmake a claim against any party that the Software infringes or contributes to\nthe infringement of any patent, then your patent license to the Software ends\nimmediately.\n\n<h3>Redistribution</h3>\n\nThe Terms and Conditions apply to all copies, modifications and derivatives of\nthe Software.\n\nIf you redistribute any copies, modifications or derivatives of the Software,\nyou must include a copy of or a link to these Terms and Conditions and not\nremove any copyright notices provided in or with the Software.\n\n<h3>Disclaimer</h3>\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND WITHOUT WARRANTIES OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING WITHOUT LIMITATION WARRANTIES OF FITNESS FOR A PARTICULAR\nPURPOSE, MERCHANTABILITY, TITLE OR NON-INFRINGEMENT.\n\nIN NO EVENT WILL WE HAVE ANY LIABILITY TO YOU ARISING OUT OF OR RELATED TO THE\nSOFTWARE, INCLUDING INDIRECT, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES,\nEVEN IF WE HAVE BEEN INFORMED OF THEIR POSSIBILITY IN ADVANCE.\n\n<h3>Trademarks</h3>\n\nExcept for displaying the License Details and identifying us as the origin of\nthe Software, you have no right under these Terms and Conditions to use our\ntrademarks, trade names, service marks or product names.\n\n<h2>Grant of Future License</h2>\n\nWe hereby irrevocably grant you an additional license to use the Software under\nthe MIT license that is effective on the second anniversary of the date we make\nthe Software available. On or after that date, you may use the Software under\nthe MIT license, in which case the following will apply:\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\nof the Software, and to permit persons to whom the Software is furnished to do\nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n</dialog>\n  "
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "Bearer <token>"
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "tags": [
    {
      "name": "Users",
      "description": "Some endpoints are public, but some require authentication. We provide all the required endpoints to create an account and authorize yourself."
    },
    {
      "name": "Tokens",
      "description": ""
    },
    {
      "name": "Packages",
      "description": ""
    },
    {
      "name": "Misc.",
      "description": ""
    }
  ],
  "paths": {
    "/-/npm/v1/user": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get User Profile",
        "description": "Returns profile object associated with auth token\n```bash\n$ npm profile\nname: johnsmith\ncreated: 2015-02-26T01:26:01.124Z\nupdated: 2023-01-10T21:55:32.118Z\n```",
        "responses": {
          "200": {
            "description": "User Profile",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "name": "johnsmith"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/-/ping": {
      "get": {
        "tags": [
          "Misc."
        ],
        "summary": "Ping",
        "description": "Check if the server is alive\n```bash\n$ npm ping\nnpm notice PING http://localhost:1337/\nnpm notice PONG 13ms\n```",
        "security": [],
        "responses": {
          "200": {
            "description": "Server is alive",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {}
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "tags": [
          "Misc."
        ],
        "summary": "Documentation",
        "description": "Get the registry docs",
        "responses": {
          "200": {
            "description": "Retrieves the registry docs"
          }
        }
      }
    },
    "/-/whoami": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get User Username",
        "description": "Returns username associated with auth token\n```bash\n$ npm whoami\njohnsmith\n```",
        "responses": {
          "200": {
            "description": "Retrieves a user name",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "username": "johnsmith"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/-/npm/v1/tokens": {
      "get": {
        "tags": [
          "Tokens"
        ],
        "summary": "Get Token Profile",
        "description": "Get tokens for the associative authenticated user\n\n```bash\n$ npm token list\n<token-type> token <partial-token>â€¦ with id <uuid> created <date-created>\n```",
        "responses": {
          "200": {
            "description": "Token Profile",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "objects": [
                      {
                        "cidr_whitelist": null,
                        "readonly": false,
                        "automation": null,
                        "created": null,
                        "updated": null,
                        "scope": [
                          {
                            "values": [
                              "*"
                            ],
                            "types": {
                              "pkg": {
                                "read": true,
                                "write": true
                              }
                            }
                          },
                          {
                            "values": [
                              "*"
                            ],
                            "types": {
                              "user": {
                                "read": true,
                                "write": true
                              }
                            }
                          }
                        ],
                        "key": "fff00131-d831-4517-84c0-1b53b1c85ba9",
                        "token": "a67a46ad-fe51-4fde-94fe-c56ee00fd638"
                      }
                    ],
                    "urls": {}
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Tokens"
        ],
        "summary": "Create Token",
        "description": "Creates a token for authenticated user or provided UUID user (later requires global read+write user scope)",
        "headers": {
          "Authorization": {
            "description": "The number of allowed requests in the current period",
            "schema": {
              "type": "Authorization",
              "bearerFormat": "Bearer <token>"
            }
          }
        },
        "requestBody": {
          "description": "Scope of access/scopes for the new token",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "example": {
                  "uuid": "admin",
                  "scope": [
                    {
                      "values": [
                        "*"
                      ],
                      "types": {
                        "pkg": {
                          "read": true,
                          "write": false
                        }
                      }
                    },
                    {
                      "values": [
                        "~admin"
                      ],
                      "types": {
                        "user": {
                          "read": true,
                          "write": true
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Token created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "example": {
                    "uuid": "admin",
                    "token": "1ef5f713-15ff-6491-b62d-d16f6f04e6ac",
                    "scope": [
                      {
                        "values": [
                          "*"
                        ],
                        "types": {
                          "pkg": {
                            "read": true,
                            "write": false
                          }
                        }
                      },
                      {
                        "values": [
                          "~admin"
                        ],
                        "types": {
                          "user": {
                            "read": true,
                            "write": true
                          }
                        }
                      }
                    ]
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Tokens"
        ],
        "summary": "Update Token",
        "description": "Update a token by the token itself",
        "responses": {
          "200": {
            "description": "Token updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Tokens"
        ],
        "summary": "Delete Token by Auth",
        "description": "Revokes a token for the associative authenticated user\n\n```bash\n$ npm token revoke <token>\n```",
        "responses": {
          "204": {
            "description": "Token Deleted Response"
          }
        }
      }
    },
    "/-/npm/v1/tokens/token/{uuid}": {
      "delete": {
        "tags": [
          "Tokens"
        ],
        "summary": "Delete Token by UUID",
        "description": "Delete a token by the token UUID",
        "parameters": [
          {
            "in": "path",
            "name": "uuid",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Token deleted"
          }
        }
      }
    },
    "/{package-name}": {
      "get": {
        "tags": [
          "Packages"
        ],
        "summary": "Get Package Packument",
        "description": "Returns all published packages & metadata for the specific package name",
        "parameters": [
          {
            "in": "path",
            "name": "scope",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "package-name",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Package packument"
          },
          "404": {
            "description": "Not found"
          }
        }
      },
      "put": {
        "tags": [
          "Packages"
        ],
        "summary": "Publish Package",
        "parameters": [
          {
            "in": "path",
            "name": "scope",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "package-name",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Package data",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Package published"
          },
          "400": {
            "description": "Invalid request"
          },
          "409": {
            "description": "Conflict"
          }
        }
      }
    },
    "/{package-name}/{version}": {
      "get": {
        "tags": [
          "Packages"
        ],
        "summary": "Get Package Manifest",
        "description": "Returns the full package manifest for a specific package version",
        "parameters": [
          {
            "in": "path",
            "name": "scope",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "package-name",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "version",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Package manifest"
          },
          "404": {
            "description": "Not found"
          }
        }
      }
    },
    "/{package-name}/-/{tarball}": {
      "get": {
        "tags": [
          "Packages"
        ],
        "summary": "Get Package Tarball",
        "parameters": [
          {
            "in": "path",
            "name": "scope",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "package-name",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "tarball",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Package tarball"
          },
          "404": {
            "description": "Not found"
          }
        }
      }
    }
  },
  "securitySchemes": {
    "bearerAuth": {
      "type": "http",
      "scheme": "bearer"
    },
    "basicAuth": {
      "type": "http",
      "scheme": "basic"
    },
    "apiKeyHeader": {
      "type": "apiKey",
      "in": "header",
      "name": "X-API-Key"
    },
    "apiKeyQuery": {
      "type": "apiKey",
      "in": "query",
      "name": "api_key"
    },
    "apiKeyCookie": {
      "type": "apiKey",
      "in": "cookie",
      "name": "api_key"
    },
    "oAuth2": {
      "type": "oauth2",
      "flows": {
        "authorizationCode": {
          "authorizationUrl": "https://galaxy.scalar.com/oauth/authorize",
          "tokenUrl": "https://galaxy.scalar.com/oauth/token",
          "scopes": {
            "read:account": "read your account information",
            "write:planets": "modify planets in your account",
            "read:planets": "read your planets"
          }
        },
        "clientCredentials": {
          "tokenUrl": "https://galaxy.scalar.com/oauth/token",
          "scopes": {
            "read:account": "read your account information",
            "write:planets": "modify planets in your account",
            "read:planets": "read your planets"
          }
        },
        "implicit": {
          "authorizationUrl": "https://galaxy.scalar.com/oauth/authorize",
          "scopes": {
            "read:account": "read your account information",
            "write:planets": "modify planets in your account",
            "read:planets": "read your planets"
          }
        },
        "password": {
          "tokenUrl": "https://galaxy.scalar.com/oauth/token",
          "scopes": {
            "read:account": "read your account information",
            "write:planets": "modify planets in your account",
            "read:planets": "read your planets"
          }
        }
      }
    }
  },
  "parameters": {
    "planetId": {
      "name": "planetId",
      "in": "path",
      "required": true,
      "schema": {
        "type": "integer",
        "format": "int64",
        "examples": [
          1
        ]
      }
    },
    "limit": {
      "name": "limit",
      "in": "query",
      "description": "The number of items to return",
      "required": false,
      "schema": {
        "type": "integer",
        "format": "int64",
        "default": 10
      }
    },
    "offset": {
      "name": "offset",
      "in": "query",
      "description": "The number of items to skip before starting to collect the result set",
      "required": false,
      "schema": {
        "type": "integer",
        "format": "int64",
        "default": 0
      }
    }
  },
  "responses": {
    "BadRequest": {
      "description": "Bad Request",
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/Error"
          }
        }
      }
    },
    "Forbidden": {
      "description": "Forbidden",
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/Error"
          }
        }
      }
    },
    "NotFound": {
      "description": "NotFound",
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/Error"
          }
        }
      }
    },
    "Unauthorized": {
      "description": "Unauthorized",
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/Error"
          }
        }
      }
    }
  }
}